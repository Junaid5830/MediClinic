@model MediClinic.Models.TransportViewModel
@{
    ViewData["Title"] = "DriverAdd";
    Layout = "~/Views/Shared/_LayoutElite.cshtml";
    var Action = ViewBag.Action;
    var image = ViewBag.PatientImage;
    var transportImage = ViewBag.TransportPhoto;
    var WriteSignatureImage = ViewBag.WriteSignature;
    var HiddenimageForPatient = ViewBag.PatientImage;
    var Password = ViewBag.Password;
}

@section scripts{

    <script src="~/app-assets/base/jquery-ui.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/app-assets/js/jquery.form.js"></script>
    <script src="~/Elite/_node_modules/inputmask/dist/min/jquery.inputmask.bundle.min.js"></script>
    <script src="~/Elite/js/pages/mask.init.js"></script>
    <script src="~/cropper/croppie.js"></script>
    <script src="~/webcamjs/webcam.js"></script>
    <script src="~/Color/spectrum.js"></script>
    <script src="~/app-assets/signature-pad/signature-pad/jquery/signature_pad.umd.js"></script>
    <script src="~/app-assets/signature-pad/signature-pad/jquery/app.js"></script>
    <script src="~/HunterTimePicker/js/jquery-timepicker.js"></script>

    <script>
        function enablefields() {
            debugger
            var update = document.getElementsByClassName("update-class")
            for (var j = 0; j < update.length; j++) {
                var val = $(update[j]).val();
                $(update[j]).attr("disabled", false);

            }
            //$("#documentName").attr('hidden', false);
            //$(".dropify-clear").attr('hidden', false);
            //$("#sigCanvas").css('pointer-events', 'all');
        }
        function disablefield() {
            debugger

            var update = document.getElementsByClassName("update-class")
            for (var j = 0; j < update.length; j++) {
                var val = $(update[j]).val();
                $(update[j]).attr("disabled", true);

            }
            debugger

            //$("#documentName").attr('hidden', true);
            //$(".dropify-clear").attr('hidden', true);
            //$("#sigCanvas").css('pointer-events', 'none');

        }
        $(document).ready(function () { 
            var updateAction = "@Action";
            if (updateAction == "Update") {
                disablefield();

            }
            if ($("#OwnCheck").prop("checked") == true) {
                $("#DriverOwn").show();
                $("#AssignedVehicle").hide();
              

            }
            else {
                $("#DriverOwn").hide();
                $("#AssignedVehicle").show();
            }
        });
        $(function () {

            $('.ssn').inputmask({ mask: '999-99-9999', greedy: false, skipOptionalPartCharacter: "", "clearIncomplete": true });

            $('.phoneno').inputmask({ mask: '1 (999) 999-9999', greedy: false, skipOptionalPartCharacter: "", "clearIncomplete": true });

        });
        $(".time-picker").hunterTimePicker();

        $('#multilanguage').select2({
            placeholder: "Select Languages"
        });
        var banColor = ['#ffffff', '#000000', '#F0FFF0', '#F5FFFA', '#F0FFFF', '#F0F8FF', '#F8F8FF', '#FFF5E', '#F5F5DC', '#FDF5E6', '#FFFAF0', '#FFFFF0', '#FAEBD7', '#FAF0E6', '#FFF0F5'];
        function passwordSHow() {
            debugger
            var x = document.getElementsByClassName("myInput");
            for (var i = 0; i < x.length; i++) {
                if (x[i].type === "password") {
                    x[i].type = "text";
                } else {
                    x[i].type = "password";
                }
            }

        }

        $("#showPalette").spectrum({
            //color: "#f00",
            allowEmpty: true,

            showInput: true,
            containerClassName: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: true,
            showAlpha: true,
            maxPaletteSize: 10,
            preferredFormat: "hex",
            change: function (color) {
                debugger;
                if (color) {
                    if ($.inArray(color.toHexString(), banColor) >= 0) {
                        $("#color_error").text("White color is Not Allowed");
                        // Reset your palate
                        $("#showPalette").val('');
                        $('.sp-clear').trigger('click');
                    }
                    else {
                        $("#color_error").html("");
                    }
                }

            },
            move: function (color) {
                //updateBorders(color);
            },
            show: function () {

            },
            beforeShow: function () {

            },
            hide: function (color) {
                //updateBorders(color);
            },

            palette: [
                ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)", /*"rgb(153, 153, 153)","rgb(183, 183, 183)",*/
                    "rgb(204, 204, 204)", "rgb(217, 217, 217)", /*"rgb(239, 239, 239)", "rgb(243, 243, 243)",*/, "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"],
                ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)",
                    "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)"],
                ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)",
                    "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)",
                    "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)",
                    "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)",
                    "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)",
                    "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)",
                    "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                    "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)",
                    /*"rgb(133, 32, 12)", "rgb(153, 0, 0)", "rgb(180, 95, 6)", "rgb(191, 144, 0)", "rgb(56, 118, 29)",
                    "rgb(19, 79, 92)", "rgb(17, 85, 204)", "rgb(11, 83, 148)", "rgb(53, 28, 117)", "rgb(116, 27, 71)",*/
                    "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)",
                    "rgb(12, 52, 61)", "rgb(28, 69, 135)"]
            ]
        });
        $('#OwnCheck').change(function () {
            if ($("#OwnCheck").prop("checked") == true) {
                $("#DriverOwn").show();
                $("#AssignedVehicle").hide();
                $("#VehicleList").val("");
                $("#VehicleList").trigger('change');
            }
            else {
                $("#DriverOwn").hide();
                $("#AssignedVehicle").show();
            }
        });


    </script>
    <script>
        function closeCamera() { 
        }

        function readURL(input) { 
            if (input.files && input.files[0]) {

                var reader = new FileReader();
                reader.onload = function (e) {
                    
                    //Signdata = e.target.result;
                    $('#savetarget').attr('src', e.target.result);
                    $('#savetarget').show();
                    $('#UpdateCaseSignature').hide(); 

                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        $("#SignatureImageUpload").change(function () {
         readURL(this);
        });

    </script>
    <script>
        var IsCapturedScreen2 = false;

        var basic = $("#main-cropper2").croppie({
            viewport: { width: 250, height: 250, type: 'circle' },
            boundary: { width: 280, height: 280 },
            showZoomer: true,
            url: "/app-assets/images/user/male-user.png",
            enableExif: true,
            enableOrientation: true
        });

        function readFile2(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $("#main-cropper2").croppie("bind", {
                        url: e.target.result
                    });

                };

                reader.readAsDataURL(input.files[0]);
            }
        }

        //WebCam Section Script
        function OpenImageSection2() {
            $('#take_snapbtn2').show();

            $("#RemoveResult2").removeAttr("disabled");
            $('#main-cropper2').hide();
            $('#captureImageFromCam2').show();
            Webcam.init();


            Webcam.set({
                width: 320,
                height: 240,
                image_format: 'jpeg',
                jpeg_quality: 90
            });

            Webcam.attach('#my_camera2');
        }



        function take_snapshot2() {
            debugger;
            IsCapturedScreen2 = true;
            // take snapshot and get image data
            $('#showResult2').removeClass('disabled');
            $('#captureImageFromCam2').hide();
            $('#main-cropper2').show();
            Webcam.snap(function (data_uri) {
                // display results in page

                var result = dataURLtoFile(data_uri, "crop");
                debugger;
                var reader = new FileReader();

                reader.onload = function (e) {
                    $("#main-cropper2").croppie("bind", { 
                        url: e.target.result
                    });
                };

                reader.readAsDataURL(result);

            });
             Webcam.reset();
        } 

        $(".actionUpload2 input").on("change", function () {
            debugger;
            $("#showResult2").removeClass("disabled");
            $("#RemoveResult2").removeAttr("disabled");
            readFile2(this);
        });
        $(".actionDone").on("click", function () {
            $(".actionDone").toggle();
            $(".actionUpload2").toggle();
        });

        $("#showResult2").click(function () {
            debugger;
            if (IsCapturedScreen2) {
                $('#result-wrapper2').show();
                $('#captureImageFromCam2').hide();
            }
            $("#main-cropper2")
                .croppie("result", {
                    type: "canvas",
                    size: "viewport",
                    circle: true
                })
                .then(function (resp) {
                    $("#result2").attr("src", resp);
                });
            $(".removebtn-show2").show();
            $(".remove-image2").show();
            $('#modal2').modal('hide');
        });
        $("#rotateLeft2").click(function () {
            basic.croppie('rotate', parseInt($(this).data('deg')));
        });

        $("#rotateRight2").click(function () {
            basic.croppie('rotate', parseInt($(this).data('deg')));
        }); 
        $(function () {

            $(".remove-image2").on('click', function () {
                $(".list_image2").attr('src', '/app-assets/images/user/male-user.png');
                $(".remove-image2").hide();
            })

            $(".removebtn-show2").on('click', function () {
                $(".empty_img2").attr('src', '/app-assets/images/user/male-user.png');
                $(".removebtn-show2").hide();
            })
        });

        $(document).on('submit', '#TestFrom', function (e) {


            var ProfileSrc = $("#result2").attr('src');

            debugger;
            e.preventDefault();
            if ($(this).valid()) {

                debugger;
                isSignatureButtonClick = true;
                $(this).ajaxSubmit({
                    data: { PhotoPath: ProfileSrc },
                    success: function (response) {
                         $(".checkmark").show().fadeOut(6000);
                         window.location.href = "@Url.Action("TransportAndDriver","Transport")";
                        //$('#upload').attr('disabled', false);
                        //$('#upload .waves-ripple').remove();
                    },
                    error: function (response) {
                        //$('#upload').attr('disabled', false);
                    },

                    complete: function (xhr) {

                        //$('#upload').attr('disabled', false);
                        //$('#upload .waves-ripple').remove();
                       // onCreateDriverForm(xhr.responseJSON);
                    }
                });
            }
        })
        function onCreateDriverForm(data) {
            debugger;
            if (data.success == "Successfully") {
                $(".checkmark").show().fadeOut(6000);
                window.location.href = "@Url.Action("TransportAndDriver","Transport")";


            }
            //else {
            //    new PNotify({
            //        title: 'Error!',
            //        text: 'Please provide Valid Infomation',
            //        delay: 5000,
            //        type: 'error',
            //        addclass: 'pnotify-center'
            //    });

        }
        //if (data.isError) {
        //    new PNotify({
        //        title: 'Error!',
        //        text: 'Email is already exist',
        //        delay: 5000,
        //        type: 'error',
        //        addclass: 'pnotify-center'
        //    });

        //}


        $('.datepicker').datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: "c-100:c+10",
            showButtonPanel: true,
            dateFormat: "MM/dd/yy",
            maxDate: new Date()
        });
    </script>
    <script>
        $(".select2").select2();
        var saveAction = '@ViewBag.Action';
        var IsCapturedScreen = false;

        var basic = $("#main-cropper").croppie({
            viewport: { width: 250, height: 250, type: 'circle' },
            boundary: { width: 280, height: 280 },
            showZoomer: true,
            url: "/app-assets/images/user/male-user.png",
            enableExif: true,
            enableOrientation: true
        });

        function readFile(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $("#main-cropper").croppie("bind", {
                        url: e.target.result
                    });

                };

                reader.readAsDataURL(input.files[0]);
            }
        }

        //WebCam Section Script
        function OpenImageSection() {
            $('#take_snapbtn').show();

            $("#RemoveResult").removeAttr("disabled");
            $('#main-cropper').hide();
            $('#captureImageFromCam').show();
            Webcam.init();


            Webcam.set({
                width: 320,
                height: 240,
                image_format: 'jpeg',
                jpeg_quality: 90
            });
           
            Webcam.attach('#my_camera');
           
        }



        function take_snapshot() { 
            IsCapturedScreen = true;
            // take snapshot and get image data
            $('#showResult').removeClass('disabled');
            $('#captureImageFromCam').hide();
            $('#main-cropper').show();
            Webcam.snap(function (data_uri) {
                // display results in page

                var result = dataURLtoFile(data_uri, "crop");
                var reader = new FileReader();

                reader.onload = function (e) {
                    $("#main-cropper").croppie("bind", {
                        url: e.target.result
                    });
                };

                reader.readAsDataURL(result);

            });
               Webcam.reset();
        }

        function dataURLtoFile(dataurl, filename) {
            debugger;
            var arr = dataurl.split(','),
                mime = arr[0].match(/:(.*?);/)[1],
                bstr = atob(arr[1]),
                n = bstr.length,
                u8arr = new Uint8Array(n);

            while (n--) {
                u8arr[n] = bstr.charCodeAt(n);
            }

            return new File([u8arr], filename, { type: mime });
        }

        $(".actionUpload input").on("change", function () {
            $("#showResult").removeClass("disabled");
            $("#RemoveResult").removeAttr("disabled");
            readFile(this);
        });
        $(".actionDone").on("click", function () {
            $(".actionDone").toggle();
            $(".actionUpload").toggle();
        });

        $("#showResult").click(function () {
            debugger;
            if (IsCapturedScreen) {
                $('#result-wrapper').show();
                $('#captureImageFromCam').hide();
            }
            $("#main-cropper")
                .croppie("result", {
                    type: "canvas",
                    size: "viewport",
                    circle: true
                })
                .then(function (resp) {
                    $("#result").attr("src", resp);
                });
            $(".removebtn-show").show();
            $(".remove-image").show();
            $('#modal1').modal('hide');
        });
        $("#rotateLeft").click(function () {
            basic.croppie('rotate', parseInt($(this).data('deg')));
        });

        $("#rotateRight").click(function () {
            basic.croppie('rotate', parseInt($(this).data('deg')));
        });
        $('.uploadImageFromSignatureBox').click(function () { $('#SignatureImageUpload').trigger('click'); });
        $(function () {

            $(".remove-image").on('click', function () {
                $(".list_image").attr('src', '/app-assets/images/user/male-user.png');
                $(".remove-image").hide();
            })

            $(".removebtn-show").on('click', function () {
                $(".empty_img").attr('src', '/app-assets/images/user/male-user.png');
                $(".removebtn-show").hide();
            })
        });
        $(document).ready(function () {
            $('.signature_pad_cancel').on('click', function () {
                $('#signature-pad1').hide();
            })

            $('#take_snapbtn').hide();


        });
        $(function () {
            $('#savetarget').hide();
            var canvas = document.querySelector('#signature-pad1 canvas');
            var pad = new SignaturePad(canvas);
            $('#pad_clear').on('click', function () {
                $('#savetarget').hide();
                Signdata = "";
            })
            $('#accept').on('click', function () {
                debugger;

                if (pad.isEmpty()) {
                    Signdata = "";

                    return false;
                }
                else {
                    debugger;
                    Signdata = pad.toDataURL();
                    $('#savetarget').attr('src', Signdata);
                    $('#UpdateCaseSignature').hide();
                    $('#savetarget').show();

                    pad.off();

                }


            });



        });

        $(document).on('click', '#submitBtn', function (e) {
           //submitBtn
            //driverFrom
            let error = false;
            debugger
            //var srcArray = [];
            //var attachmentsNames = [];
            //var form_data = new FormData();
            //var ins = document.getElementById('imgInp').files.length;
            //for (var x = 0; x < ins; x++) {
            //    form_data.append("files[]", document.getElementById('imgInp').files[x]);
            //}
            //$("#preview p").each(function () {
            //    debugger
            //    let text = $(this).text();
            //    text = text.substring(0, text.length - 1)
            //    attachmentsNames.push(text);
            //});
            //var img = $('#imagesDiv').children('img').map(function () {
            //    srcArray.push($(this).attr('src'));
            //}).get()
            var ProfileSrc = $("#result").attr('src');
            var TransportSrc = $("#result2").attr('src');
            var Selectlanguage = [];
            $('#multilanguage :selected').each(function (i, selected) {
                Selectlanguage.push($(selected).val());
            });
            if ($("#OwnCheck").prop("checked") == true) {
                //vehicleValid
                debugger
                
                $('.vehicleValid').each(function () {
                    debugger
                   
                    let q = $(this).siblings('p').text();
                    
                    let value = $(this).val();
                    if (value == "") {
                        var el = $(this).siblings('.required');
                        el.text("" + q + " is required");
                        error = true;
                    } else if (value == null) {
                        var el = $(this).siblings('.required');
                        el.text("" + q +" is required");
                        error = true;
                    }
                });
              
            }
            else {
                var vehicleVal = $("#VehicleList").val();
                if (vehicleVal == '') {
                    $('.VehicleErr').text("Vehicle is required");
                    error=true;
                } else if (vehicleVal == null) {
                    $('.VehicleErr').text("Vehicle is is required");
                    error = true;
                }
            }
            
            debugger;
            e.preventDefault();
            if ($("#driverFrom").valid() == true && error != true) {
              
                $('#accept').trigger('click');

                debugger;
                isSignatureButtonClick = true;
                $("#driverFrom").ajaxSubmit({
                    data: { Signature: Signdata, profileImage: ProfileSrc, language: Selectlanguage, transportImage: TransportSrc },
                    success: function (response) {

                        //$('#upload').attr('disabled', false);
                        //$('#upload .waves-ripple').remove();
                    },
                    error: function (response) {
                        //$('#upload').attr('disabled', false);
                    },

                    complete: function (xhr) {

                        //$('#upload').attr('disabled', false);
                        //$('#upload .waves-ripple').remove();
                        onCreateDriverForm(xhr.responseJSON);
                    }
                });
            }
        })
        function onCreateDriverForm(data) {
            debugger;
            if (data.success == "Successfully") {
                $(".checkmark").show().fadeOut(6000);
                window.location.href = "@Url.Action("TransportAndDriver","Transport")";

            }
            else {
                var message = data.error
                new PNotify({
                    title: 'Error!',
                    text: `${message}`,
                    delay: 5000,
                    type: 'error',
                    addclass: 'pnotify-center'
                });

            }

        }
        $('.datepicker').datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: "c-100:c+10",
            showButtonPanel: true,
            dateFormat: "MM/dd/yy"
        });
    </script>
    <script>
        $(".dropify").dropify();
        $('#VehicleType')
            .select2()
            .on('select2:open', () => {
                $(".select2-results:not(:has(a))").append('<a class="sideout" href="javascript:void(0);" onclick="ToggleSideBar(\'slide-out-right\')" style="padding: 6px;height: 20px;display: inline-table;">Add New</a>');
            });
        $('#VehicleMake')
            .select2()
            .on('select2:open', () => {
                $(".select2-results:not(:has(a))").append('<a class="sideout" href="javascript:void(0);" onclick="ToggleSideBar(\'slide-out-right2\')" style="padding: 6px;height: 20px;display: inline-table;">Add New</a>');
            });
        $('#VehicleModel')
            .select2()
            .on('select2:open', () => {
                $(".select2-results:not(:has(a))").append('<a class="sideout" href="javascript:void(0);" onclick="ToggleSideBar(\'slide-out-right3\')" style="padding: 6px;height: 20px;display: inline-table;">Add New</a>');
            });
        var city = '';
        var hascity = 0;
        var hassub = 0;
        var state = '';
        var nbhd = '';
        var subloc = '';
        var country = '';
        var hascountry = 0;
        $(document).ready(function () {
            $.support.cors = true;
            $.ajaxSetup({ cache: false });
            $('#info_Zip').keyup(function () {
                $zval = $('#info_Zip').val();
                if ($zval.length == 5) {
                    $jCSval = getCityState($zval, true);
                }
            });
            function getCityState($zip, $blnUSA) {

                $.getJSON('https://maps.googleapis.com/maps/api/geocode/json?address=' + $zip + '&key=AIzaSyDBlodDGZJdKI6epWtg8hZtKv-NQXv7aRc', function (response) {
                    if (response.status == "ZERO_RESULTS") {
                        $("#err_infozip").html("Enter Valid & Only US zip code").show().fadeOut(2200);
                    }
                    else {
                        var address_components = response.results[0].address_components;
                        $.each(address_components, function (index, component) {

                            var types = component.types;
                            $.each(types, function (index, type) {
                                if (type == 'locality') {
                                    city = component.long_name;
                                    hascity = 1;
                                }
                                else if (type == 'sublocality') {
                                    city = component.long_name;
                                }
                                if (type == 'administrative_area_level_1') {
                                    state = component.long_name;
                                }
                                if (type == 'country') {
                                    country = component.long_name;

                                }
                                if (type == 'neighborhood') {
                                    nbhd = component.long_name;
                                }
                                if (type == 'sublocality') {
                                    subloc = component.long_name;
                                    hassub = 1;
                                }
                            });
                        });

                        $("#info_city").val(city);
                        $("#info_state").val(state);
                        $("#info_country").val(country);
                    }


                });
            }
        });

    </script>
    <script>

       
        $("#imgInp").change(function () {
            readURL(this);
        });

        //$("#imgInp").on("change", function (e) {
        //    debugger
        //    //imagesPreview(this, 'div.gallery');
        //    var files = e.target.files,
        //        filesLength = files.length;
        //    for (var i = 0; i < filesLength; i++) {

        //        debugger
        //        var f = files[i];
        //        imagesPreview(f, 'div.gallery');
        //        $('#preview').append('<p>' + f.name + '<span  class="remove-file right text-danger">x</span></p>');

        //    }
        //});

        //var imagesPreview = function (input, placeToInsertImagePreview) {
        //    debugger
        //    var path = input.name;
        //    path = path.replace(/[^a-zA-Z ]/g, "");
        //    path = path.replace(/\s+/g, '');
        //    path.substr(0, path.lastIndexOf('.'));

        //    var reader = new FileReader();

        //    reader.onload = function (event) {
        //        $($.parseHTML('<img  class="' + path+'">')).attr('src', event.target.result).appendTo(placeToInsertImagePreview);
        //    }

        //    reader.readAsDataURL(input);
        //    //if (input.files) {
        //    //    var filesAmount = input.files.length;

        //    //    for (i = 0; i < filesAmount; i++) {

        //    //    }
        //    //}

        //};
        $(document).on('click', '.remove-file', function () {
            debugger
            //let className = $(this).parent("p").text();
            //className = className.replace(/[^a-zA-Z ]/g, "");
            //className = className.replace(/\s+/g, '');
            //className.substr(0, className.lastIndexOf('.'));
            //className= className.substring(0, className.length - 1)
            //var img = $("div.gallery").find('.' + className);
            //img.remove();
            $(this).parent("p").remove();
        });




        // Array For Images Src
        //var srcArray = [];


        //$("#getImagessrc").click(function () {
        //    $("#preview p").each(function () {
        //        debugger
        //        let text = $(this).text();
        //        text= text.substring(0, text.length - 1)
        //        console.log(text);
        //    });
        //   //var img= $('#imagesDiv').children('img').map(function () {
        //   //     srcArray.push($(this).attr('src'));
        //   //}).get()
        //   // console.log(srcArray.length);
        //});

        $("#DriverDto_LicenseState").on('change', function () {
            $("#LicenseStateValidation").html("");
        })
        function ShowModal(name) {
            $("#" + name).modal("show");
        }

    </script>
}
@section styles
{
    <link href="~/app-assets/base/jquery-ui.css" rel="stylesheet" />

    <link href="~/cropper/croppie.css" rel="stylesheet" />
    <link href="~/Color/spectrum.css" rel="stylesheet" />
    <link href="~/app-assets/signature-pad/signature-pad/css/signature-pad.css" rel="stylesheet" />
    <link href="~/css/timePicker.css" rel="stylesheet" />

    <style>
        input.city, input.state {
            background-color: #f0f0f038 !important;
            color: #00000085;
            cursor: not-allowed;
        }

        .sp-replacer {
            margin: 15px auto;
            width: 45%;
            padding: 5px;
            border-radius: 4px;
            background-color: #f6f6f6 !important;
            box-shadow: 0 1px 1px 0 rgba(0, 0, 0, .1), 0 1px 1px -2px rgba(0, 0, 0, .1), 0 1px 3px 0 rgba(0, 0, 0, .2);
        }

        .sp-picker-container, .sp-palette-container {
            background-color: #f6f6f6;
        }

        .sp-preview {
            width: 86%;
            height: 30px;
        }

        .sp-dd {
            text-align: center;
            color: #787878;
            line-height: 27px;
            font-size: 11px;
        }

        .sp-palette .sp-thumb-el {
            border-radius: 50%;
            width: 20px !important;
            height: 20px !important;
        }

        .sp-palette .sp-thumb-inner {
            border-radius: 50%;
        }

        .sp-replacer {
            margin: 0px !important
        }

        #captureImageFromCam, #captureImageFromCam2 {
            width: 100%;
            margin: 5% 0;
        }

        #my_camera , #my_camera2{
            margin: 0 auto;
        }


        .actions {
            display: none;
        }

        .center {
            text-align: center;
        }

        .img-preview {
            margin: 0 auto;
            height: 250px;
            width: 250px;
            border-radius: 50% !important;
        }

        .remove-image {
            /* display: none; */
            position: absolute;
            top: 0;
            right: 22%;
            border-radius: 10em;
            padding: 2px 6px 3px;
            text-decoration: none;
            font: 700 21px/20px sans-serif;
            background: #555;
            border: 3px solid #fff;
            color: #FFF;
            box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 2px 4px rgba(0,0,0,0.3);
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            -webkit-transition: background 0.5s;
            transition: background 0.5s;
        }

        .middle {
            transition: .5s ease;
            opacity: 0;
            position: absolute;
            top: 43%;
            left: 50%;
            transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
            text-align: center;
        }


        #result {
            cursor: pointer;
        }

        .panel-body .btn-info {
            margin-top: 5px;
            background-image: linear-gradient(135.42deg,#1790ea 0,#6078ea 100%) !important;
        }

        #result-wrapper:hover .middle {
            cursor: pointer;
            opacity: 1;
        }


        .modal-dialog {
            max-width: 700px !important;
        }

        .imageModel input.custom-file-input {
            width: 5rem;
            right: 17px;
            height: 38px !important;
            top: -40px;
            cursor: pointer !important;
        }

        .actionUpload {
            width: 5rem;
        }


        
 
        .custom-checkbox {
            margin-top: 12px !important;
        }

        .select2 {
            width: 100% !important;
            margin-bottom: 2% !important
        }

        .customtab {
            display: block !important;
        }




        .center:hover .edit {
            display: block;
        }

        .ti-camera {
            font-size: 22px !important;
        }

        .edit {
            padding-top: 7px;
            padding-right: 7px;
            position: absolute;
            right: 0;
            top: 0;
            display: none;
        }

            .edit a {
                color: #000;
            }

        .center:hover .left-delete {
            cursor: pointer;
            opacity: 1;
        }

        .center:hover .patientProfile_pic {
            cursor: pointer;
            opacity: 0.3;
        }

        .center:hover .middle {
            cursor: pointer;
            opacity: 1;
        }

        .text a, .text p {
            color: #fff !important;
            font-size: 17px;
        }

        .text p {
            margin-top: 0px !important;
        }

        .remove-image {
            display: none;
            position: absolute;
            top: 0;
            right: 22%;
            border-radius: 10em;
            padding: 2px 6px 3px;
            text-decoration: none;
            font: 700 21px/20px sans-serif;
            background: #555;
            border: 3px solid #fff;
            color: #FFF;
            box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 2px 4px rgba(0,0,0,0.3);
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            -webkit-transition: background 0.5s;
            transition: background 0.5s;
        }

            .remove-image:hover {
                background: #E54E4E;
                padding: 3px 7px 5px;
                top: 0;
                right: 22%;
            }

            .remove-image:active {
                background: #E54E4E;
                top: 0;
                right: 22%;
            }

        .imageModel {
            height: 78% !important;
            max-height: 78% !important;
        }

            .imageModel .modal-dialog {
                max-width: 60% !important
            }

            .imageModel input.custom-file-input {
                position: absolute;
                top: 0;
                left: 0;
                opacity: 0;
                height: 38px !important;
                width: 5rem !important;
                cursor: pointer !important;
            }

        .cr-slider {
            width: 75% !important
        }

        .button {
            position: relative;
            color: white;
            padding: 0 2rem !important;
            border-radius: 3px;
            font-size: 16px;
            font-weight: bold;
            top: 5px !important;
            margin: 0 auto;
            margin-bottom: 0px;
            width: auto;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .panel-body .btn-info {
            margin-top: 5px;
            background-image: linear-gradient(135.42deg,#1790ea 0,#6078ea 100%) !important;
            color: #fff !important;
        }

        a {
            cursor: pointer;
        }

        #cameraIcon i {
            color: #547cea !important;
            font-size: 22px;
        }

        .croppie-container .cr-image {
            top: 25px !important;
            left: 35px !important;
        }

        .imageModel .mdi {
            font-size: 22px !important
        }

        @@media screen and (max-width:600px) {
            .form-MiddleName {
                margin-top: 0% !important;
            }
        }

        #DriverDto_Email[readonly] {
            cursor: text;
            background-color: #fff;
        }
    </style>
}
<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" /><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" /></svg>

<div class="page-wrapper">
    <div class="container">
        <div id="breadcrumbs-wrapper pb-0">
            <div class="row">
                <div class="col margin-top-8">
                    <h5 class="breadcrumbs-title color-blue">New Driver</h5>
                </div>
                <div class="col">
                    <a href="@Url.Action("TransportAndDriver","Transport")" class="waves-effect waves-light float-right">
                        <i class="mdi mdi-arrow-left right arrow-icon"></i>

                    </a>
                </div>
            </div>
        </div>


        <form asp-action="DriverAdd" asp-controller="Transport" method="post" id="driverFrom" autocomplete="off">
            <input type="text" asp-for="DriverDto.DriverId" hidden="hidden" />
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            First Name <span class="required">*</span>
                        </p>
                        <input type="hidden" asp-for="DriverDto.IsActive">
                        <input type="text" class="text-input update-class " asp-for="DriverDto.FirstName" placeholder="Enter First Name">
                        <span class="required" asp-validation-for="DriverDto.FirstName"></span>
                    </div>
                </div>
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Middle Name
                        </p>
                        <input type="text" class="text-input update-class " asp-for="DriverDto.MiddleName" placeholder="Enter Middle Name">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Last Name <span class="required">*</span>
                        </p>
                        <input type="text" class="text-input update-class " asp-for="DriverDto.LastName" placeholder="Enter Last Name">
                        <span class="required" asp-validation-for="DriverDto.LastName"></span>
                    </div>
                </div>

                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                    <div class="input-field">
                        <p>
                            Address <span class="required">*</span>
                        </p>
                        <input type="text" class="text-input update-class" asp-for="DriverDto.Address" placeholder="Enter Address">
                        <span class="required" asp-validation-for="DriverDto.Address"></span>

                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Address Line 2
                        </p>
                        <input type="text" class="text-input update-class" asp-for="DriverDto.AddressLine2" placeholder="Enter Address Line 2">
                    </div>
                </div>
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Address Line 3
                        </p>
                        <input type="text" class="text-input update-class" asp-for="DriverDto.AddressLine3" placeholder="Enter Address Line 3">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Zip Code <span class="required">*</span>
                        </p>
                        <input type="text" class="text-input update-class " maxlength="5" id="info_Zip" asp-for="DriverDto.ZipCode" placeholder="Enter Zip Code">
                        <span asp-validation-for="DriverDto.ZipCode" class="required" id="err_infozip"></span>

                    </div>
                </div>

                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                    <div class="input-field">
                        <p>
                            City
                        </p>
                        <input type="text" class="text-input update-class city" asp-for="DriverDto.City" id="info_city" placeholder="Enter City" readonly>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            State
                        </p>
                        <input type="text" class="text-input update-class state" id="info_state" asp-for="DriverDto.State" placeholder="Enter State" readonly>
                    </div>
                </div>

                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                    <div class="input-field">
                        <p>
                            Mobile Phone <span class="required">*</span>
                        </p>
                        <input type="text" class="text-input update-class phoneno" asp-for="DriverDto.MobilePhone" placeholder="Enter Mobile Phone">
                        <span class="required" asp-validation-for="DriverDto.MobilePhone"></span>

                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Home Phone
                        </p>
                        <input type="text" class="text-input update-class phoneno" asp-for="DriverDto.HomePhone" placeholder="Enter Home Phone">
                    </div>
                </div>

                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                    <div class="input-field">
                        <p>
                            Emergency Phone
                        </p>
                        <input type="text" class="text-input  update-class phoneno" asp-for="DriverDto.EmergencyPhone" placeholder="Enter Emergency Phone">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Other Phone
                        </p>
                        <input type="text" class="text-input update-class phoneno" asp-for="DriverDto.OtherPhone" placeholder="Enter Other Phone">
                        <span asp-validation-for="DriverDto.OtherPhone"></span>
                    </div>
                </div>

                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                    <div class="input-field">
                        <p>
                            Email Address <span class="required">*</span>
                        </p>
                        <input type="text" class="text-input update-class" asp-for="DriverDto.Email" onfocus="this.removeAttribute('readonly');" readonly placeholder="Enter Email Address">
                        <span class="required" asp-validation-for="DriverDto.Email"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Password <span class="required">*</span>
                        </p>
                        <input type="password" class=" text-input update-class myInput" asp-for="DriverDto.Password" value="@Password" placeholder="Enter Password">
                        <span class="required" asp-validation-for="DriverDto.Password"></span><br />
                        <input id="showPassword" type="checkbox" class="update-class" onclick="passwordSHow()">
                        <label for="showPassword">Show Password</label>
                    </div>
                </div>
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Confirm Password <span class="required">*</span>
                        </p>
                        <input type="password" class=" text-input myInput update-class" asp-for="DriverDto.ConfirmPassword" value="@Password" placeholder="Enter Confirm Password">
                        <span class="required" asp-validation-for="DriverDto.ConfirmPassword"></span>
                    </div>
                </div>


            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                    <div class="input-field">
                        <p>
                            DOB
                        </p>
                        <input type="text" class="datepicker text-input update-class" asp-for="DriverDto.DOB" placeholder="Enter DOB">
                    </div>
                </div>
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Number SSN Number <span class="required">*</span>
                        </p>
                        <input type="text" class="text-input ssn update-class" asp-for="DriverDto.SSNNumber" placeholder="Enter SSN">
                        <span class="required" asp-validation-for="DriverDto.SSNNumber"></span>
                    </div>
                </div>


            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                    <div class="input-field">
                        <p>
                            Driver's Licence ID <span class="required">*</span>
                        </p>
                        <input type="text" class="text-input update-class" asp-for="DriverDto.DriverLicence" placeholder="Enter Driver's Licence ID">
                        <span class="required" asp-validation-for="DriverDto.DriverLicence"></span>
                    </div>
                </div>
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            Licence State
                            <span class="required">
                                *
                            </span>
                        </p>
                        <select asp-for="DriverDto.LicenseState" class="select2 update-class" data-placeholder="Select Licence State">
                            <option value="" selected disabled></option>
                            <option value="AL">AL-Alabama</option>
                            <option value="AK">AK-Alaska</option>
                            <option value="AZ">AZ-Arizona</option>
                            <option value="AR">AR-Arkansas</option>
                            <option value="CA">CA-California</option>
                            <option value="CO">CO-Colorado</option>
                            <option value="CT">CT-Connecticut</option>
                            <option value="DE">DE-Delaware</option>
                            <option value="DC">DC-District Of Columbia</option>
                            <option value="FL">FL-Florida</option>
                            <option value="GA">GA-Georgia</option>
                            <option value="HI">HI-Hawaii</option>
                            <option value="ID">ID-Idaho</option>
                            <option value="IL">IL-Illinois</option>
                            <option value="IN">IN-Indiana</option>
                            <option value="IA">IA-Iowa</option>
                            <option value="KS">KS-Kansas</option>
                            <option value="KY">KY-Kentucky</option>
                            <option value="LA">LA-Louisiana</option>
                            <option value="ME">ME-Maine</option>
                            <option value="MD">MD-Maryland</option>
                            <option value="MA">MA-Massachusetts</option>
                            <option value="MI">MI-Michigan</option>
                            <option value="MN">MN-Minnesota</option>
                            <option value="MS">MS-Mississippi</option>
                            <option value="MO">MO-Missouri</option>
                            <option value="MT">MT-Montana</option>
                            <option value="NE">NE-Nebraska</option>
                            <option value="NV">NV-Nevada</option>
                            <option value="NH">NH-New Hampshire</option>
                            <option value="NJ">NJ-New Jersey</option>
                            <option value="NM">NM-New Mexico</option>
                            <option value="NY">NY-New York</option>
                            <option value="NC">NC-North Carolina</option>
                            <option value="ND">ND-North Dakota</option>
                            <option value="OH">OH-Ohio</option>
                            <option value="OK">OK-Oklahoma</option>
                            <option value="OR">OR-Oregon</option>
                            <option value="PA">PA-Pennsylvania</option>
                            <option value="RI">RI-Rhode Island</option>
                            <option value="SC">SC-South Carolina</option>
                            <option value="SD">SD-South Dakota</option>
                            <option value="TN">TN-Tennessee</option>
                            <option value="TX">TX-Texas</option>
                            <option value="UT">UT-Utah</option>
                            <option value="VT">VT-Vermont</option>
                            <option value="VA">VA-Virginia</option>
                            <option value="WA">WA-Washington</option>
                            <option value="WV">WV-West Virginia</option>
                            <option value="WI">WI-Wisconsin</option>
                            <option value="WY">WY-Wyoming</option>
                        </select>
                        <span class="required" id="LicenseStateValidation" asp-validation-for="DriverDto.LicenseState"></span>
                    </div>
                </div>


            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="input-field">
                        <p>
                            License Class <span class="required">*</span>
                        </p>
                        <input type="text" class="datapicker text-input update-class" asp-for="DriverDto.LicenseClass" placeholder="Enter Licence Class">
                        <span class="required" asp-validation-for="DriverDto.LicenseClass"></span>

                    </div>

                </div>
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <p>Gender</p>
                    <select class="select2 update-class" data-placeholder="Select Gender" asp-for="DriverDto.GenderId" asp-items="@(new SelectList(Model.gender, "LookupId", "LookupValue"))">
                        <option value="" selected disabled></option>
                    </select>

                </div>


            </div>

            <div class="row">
                <div class=" col-sm-6 col-md-3 col-xl-3 col-3 ">
                    <p>Working Start hour <span class="required">*</span></p>

                    <input type="text" class="time-picker text-input update-class" asp-for="DriverDto.WorkingStartTime" placeholder="Enter Start hours">
                    <span id="workStartTimeValidation" class="required" asp-validation-for="DriverDto.WorkingStartTime"></span>
                </div>
                <div class=" col-sm-6 col-md-3 col-xl-3 col-3 ">
                    <p>Working End hour <span class="required">*</span></p>

                    <input type="text" class="time-picker text-input update-class" asp-for="DriverDto.WorkingEndTime" placeholder="Enter End hour">
                    <span id="workEndTimeValidation" class="required" asp-validation-for="DriverDto.WorkingEndTime"></span>

                </div>
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <p>Language</p>

                    <select class="select2 update-class" data-placeholder="Select Languages" multiple="multiple" id="multilanguage" asp-for="DriverDto.DriverLanguageList"
                            asp-items="Model.patientLanguageList">
                    </select>
                </div>
            </div>
            <div class="row">
                <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <p>Driver's Picture</p>
                    <div class="center">

                        <div class="docs-preview clearfix">
                            <div class="img-preview preview-lg">
                                <div id="result-wrapper" onclick="ShowModal('modal1')">
                                    @if (Action == "Update")
                                    {
                                        @if (image == null)
                                        {
                                            <a class="remove-image removebtn-show" href="javascript:void(0)" style="display: inline;display:none;">&#215;</a>
                                            <div class="middle">
                                                <div class="text">
                                                    @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal1"><i class="mdi mdi-camera"></i></a>*@
                                                    <p>Upload</p>
                                                </div>
                                            </div>

                                            <img src="~/app-assets/images/user/male-user.png" class="empty_img" id="result" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">

                                        }
                                        else if (image == "")
                                        {
                                            <a class="remove-image removebtn-show" href="javascript:void(0)" style="display: inline;display:none;">&#215;</a>
                                            <div class="middle">
                                                <div class="text">
                                                    @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal1"><i class="mdi mdi-camera"></i></a>*@
                                                    <p>Upload</p>
                                                </div>
                                            </div>

                                            <img src="~/app-assets/images/user/male-user.png" class="empty_img" id="result" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">

                                        }
                                        else
                                        {
                                            <a class="remove-image" href="javascript:void(0)" style="display: inline;">&#215;</a>
                                            <div class="middle">
                                                <div class="text">
                                                    @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal1"><i class="mdi mdi-camera"></i></a>*@

                                                    <p>Upload</p>
                                                </div>
                                            </div>
                                            @*<img src="~/app-assets/images/user/male-user.png" class="empty_img" id="result" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5;display:none">*@
                                            <img src="@image" id="result" class="list_image" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">
                                        }
                                    }
                                    else
                                    {
                                        <a class="remove-image removebtn-show" href="javascript:void(0)" style="display: inline;display:none;">&#215;</a>
                                        <div class="middle">
                                            <div class="text">
                                                @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal1"><i class="mdi mdi-camera"></i></a>*@
                                                <p>Upload</p>
                                            </div>
                                        </div>

                                        <img src="~/app-assets/images/user/male-user.png" class="empty_img" id="result" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">
                                    }

                                </div>
                            </div>
                        </div>
                        <div id="modal1" class="modal imageModel bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <div class="row">
                                            <div id="main-cropper"></div>
                                            <div class="panel panel-default" id="captureImageFromCam" style="display: none;">
                                                <div class="panel-heading">Camera</div>
                                                <div class="panel-body">
                                                    <div id="my_camera"></div>
                                                    <!-- A button for taking snaps -->

                                                </div>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12 center">
                                                <a class="btn add-btn button imageSection" onclick="OpenImageSection();" data-toggle="tooltip" data-placement="top" title="" data-original-title="Capture From Camera">
                                                    <i class="mdi mdi-camera"></i>
                                                </a>
                                                <a class="btn btn-info add-btn" id="take_snapbtn" onClick="take_snapshot()"> Take Snapshot</a>

                                                <a class="btn add-btn button actionUpload" data-toggle="tooltip" data-placement="top" title="" data-original-title="Upload Image">
                                                    <i class="mdi mdi-cloud-upload"></i>
                                                    <input type="file" class="custom-file-input" id="upload">
                                                </a>
                                                <a id="rotateLeft" class="btn add-btn" data-deg="-90"><i class="mdi mdi-rotate-left"></i></a>
                                                <a id="rotateRight" class="btn add-btn" data-deg="90"><i class="mdi mdi-rotate-right"></i></a>
                                                <a class="btn modal-close add-btn disabled" id="showResult">Save</a>
                                                @*<a class="btn add-btn" disabled id="RemoveResult">Remove</a>*@
                                                <a class="btn modal-close add-btn" data-dismiss="modal">Cancel</a>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-6 col-xl-6 col-12">
                    @if (Action == "Update")
                    {
                        if (WriteSignatureImage == "Empty.png")
                        {
                            <p>Write Signature</p>
                            <div id="signature-pad1" class="m-signature-pad mt-2 mb-2">
                                <div class="m-signature-pad--body">
                                    <canvas id="sigCanvas" width="500" height="200"></canvas>
                                </div>
                                <div class="m-signature-pad--footer pull-right" style="text-align: right;">
                                    <div class="description">Save Your signature before submit the form</div>
                                    <button type="button" class="btn add-btn uploadImageFromSignatureBox" id="pad_clear">
                                        Upload Image
                                    </button>
                                    <button type="button" class="btn Recreate clear signature_pad_clear" id="pad_clear" data-action="clear">
                                        Clear
                                    </button>
                                    <button type="button" id="accept" class="btn add-btn btn-info save1" data-action="save">
                                        Save Signature
                                    </button>


                                </div>
                            </div>
                            <img id="savetarget" height="250" width="600" />
                            <input type="file" id="SignatureImageUpload" asp-for="DriverDto.DriverSignature" style="display:none" />

                            <span class="WriteSignatureError required"></span>
                        }
                        else if (WriteSignatureImage == null)
                        {
                            <p>Write Signature</p>
                            <div id="signature-pad1" class="m-signature-pad mt-2 mb-2">
                                <div class="m-signature-pad--body">
                                    <canvas id="sigCanvas" width="500" height="200"></canvas>
                                </div>
                                <div class="m-signature-pad--footer pull-right" style="text-align: right;">
                                    <div class="description">Save Your signature before submit the form</div>
                                    <button type="button" class="btn add-btn uploadImageFromSignatureBox" id="pad_clear">
                                        Upload Image
                                    </button>
                                    <button type="button" class="btn Recreate clear signature_pad_clear" id="pad_clear" data-action="clear">
                                        Clear
                                    </button>
                                    <button type="button" id="accept" class="btn add-btn btn-info save1" data-action="save">
                                        Save Signature
                                    </button>


                                </div>
                            </div>
                            <img id="savetarget" height="250" width="600" />
                            <input type="file" id="SignatureImageUpload" asp-for="DriverDto.DriverSignature" style="display:none" />

                            <span class="WriteSignatureError required"></span>
                        }
                        else if (WriteSignatureImage == "")
                        {
                            <p>Write Signature</p>
                            <div id="signature-pad1" class="m-signature-pad mt-2 mb-2">
                                <div class="m-signature-pad--body">
                                    <canvas id="sigCanvas" width="500" height="200"></canvas>
                                </div>
                                <div class="m-signature-pad--footer pull-right" style="text-align: right;">
                                    <div class="description">Save Your signature before submit the form</div>
                                    <button type="button" class="btn add-btn uploadImageFromSignatureBox" id="pad_clear">
                                        Upload Image
                                    </button>
                                    <button type="button" class="btn Recreate clear signature_pad_clear" id="pad_clear" data-action="clear">
                                        Clear
                                    </button>
                                    <button type="button" id="accept" class="btn add-btn btn-sm btn-info save1" data-action="save">
                                        Save Signature
                                    </button>


                                </div>
                            </div>

                            <img id="savetarget" height="250" style="width:600px" />
                            <input type="file" id="SignatureImageUpload" asp-for="DriverDto.DriverSignature" style="display:none" />


                        }
                        else
                        {
                            <p>Your Signature is :</p>
                            <img id="savetarget" height="250" width="450" />

                            <img src="@WriteSignatureImage" class="SignatureImageUpdate" id="UpdateCaseSignature" height="250" />
                            <div class="row">
                                <div class="col s12 ">
                                    <a id="updateSignature" class="Signaturepad_show btn patientSignatureTxtField">Update Signature</a>

                                </div>

                            </div>

                            <div id="signature-pad1" class="m-signature-pad mt-2 mb-2">
                                <div class="m-signature-pad--body">
                                    <canvas id="sigCanvas" width="500" height="200"></canvas>
                                </div>
                                <div class="m-signature-pad--footer pull-right" style="text-align: right;">
                                    <div class="description">Save Your signature before submit the form</div>
                                    <button type="button" class="btn add-btn uploadImageFromSignatureBox">
                                        Upload Image
                                    </button>
                                    <button type="button" class="btn Recreate clear signature_pad_cancel">
                                        Cancel
                                    </button>
                                    <button type="button" class="btn Recreate clear signature_pad_clear" data-action="clear">
                                        Clear
                                    </button>
                                    <button type="button" id="accept" class="btn add-btn btn-info save1" data-action="save">
                                        Save Signature
                                    </button>


                                </div>
                            </div>
                            <span class="WriteSignatureError required"></span>
                            @*<input type="file" id="SignatureImageUpload" asp-for="patientIdandSignature.WriteSignature" style="display:none" />*@

                        }

                    }
                    else
                    {
                        <p>Write Signature Or Upload Signature Image</p>
                        <div id="signature-pad1" class="m-signature-pad mt-2 mb-2">
                            <div class="m-signature-pad--body">
                                <canvas id="sigCanvas" width="500" height="200"></canvas>
                            </div>
                            <div class="m-signature-pad--footer pull-right" style="text-align: right;">
                                <div class="description">Save Your signature before submit the form</div>
                                <button type="button" class="btn add-btn uploadImageFromSignatureBox">
                                    Upload Image
                                </button>
                                <button type="button" class="btn Recreate clear signature_pad_clear" id="pad_clear" data-action="clear">
                                    Clear
                                </button>
                                <button type="button" id="accept" class="btn add-btn btn-info save1" data-action="save">
                                    Save Signature
                                </button> 

                            </div>
                        </div>
                        <div class="row">
                            <div class="col m6">
                                <img id="savetarget" height="250" width="600" />

                            </div>
                        </div>
                        <span class="WriteSignatureError required"></span>
                        <input type="file" id="SignatureImageUpload" style="display:none" accept="image/x-png,image/gif,image/jpeg" />
                    }
                    <input id="hiddneWriteSign" hidden="hidden" value="@WriteSignatureImage" asp-for="DriverDto.HiddenSign">
                </div>

            </div>
            <div class="row">

                <div class="col-sm-6 col-md-6 col-xl-6 col-12 ">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" asp-for="DriverDto.IsOwnVehicleHidden" class="custom-control-input select-all update-class" id="OwnCheck">
                        <label class="custom-control-label" for="OwnCheck"> Own Vehicle</label>
                    </div>
                </div>
                @if (Action == "Update")
                {
                    if (!(Model.DriverDto.TransportId is null))
                    {
            <div class="col-sm-6 col-md-6 col-xl-6 col-12">
                <div class="input-field">
                    <p>
                        Vehicle Id
                    </p>
                    <input type="text" class="text-input"  disabled value="@Model.DriverDto.TransportId">
                </div>
                

            </div>
                    }
                }

                <div id="AssignedVehicle" class="col-sm-6 col-md-6 col-xl-6 col-12">
                    <input type="hidden" asp-for="DriverDto.TransportIdHidden" />
                    <p>Select Vehicle <span class="required">*</span></p>
                    <select id="VehicleList" class="select2 update-class" data-placeholder="Select Vehicle Type" asp-items="Model.VehiclesListForDropDown" asp-for="DriverDto.TransportId">
                        <option value="" selected disabled></option>
                    </select>
                    <span class="VehicleErr required"></span>
                </div>
            </div>
            <div id="DriverOwn" style="display:none;">
                <input type="hidden" asp-for="Transport.TransportId" />
                <div class="row">
                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <p>Vehicle Type</p>
                        <select id="VehicleType" class="select2 update-class vehicleValid" data-placeholder="Select Vehicle Type" asp-items="Model.VehicleTypeList" asp-for="Transport.VehicleTypeId">
                            <option value="" selected disabled></option>
                        </select>
                        <span class="required"></span>
                    </div>
                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <p>Vehicle Make </p>
                        <select id="VehicleMake" class="select2 update-class" data-placeholder="Select Vehicle Make" asp-items="Model.VehicleMakeList" asp-for="Transport.VehicleMakeId">
                            <option value="" selected disabled></option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <p>Vehicle Model</p>
                        <select id="VehicleModel" class="select2 update-class vehicleValid" data-placeholder="Select Vehicle Models" asp-items="Model.VehicleModelList" asp-for="Transport.VehicleModelId">
                            <option value="" selected disabled></option>
                        </select>
                        <span class="required"></span>
                    </div>

                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                        <div class="input-field">
                            <p>
                                Vehicle Capacity
                            </p>
                            <input type="text" class="text-input update-class" asp-for="Transport.VehicleCapacity" placeholder="Enter Capacity">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <div class="input-field">
                            <p>
                                Vehicle Licence Plate No
                            </p>
                            <input type="text" class="text-input update-class vehicleValid" asp-for="Transport.VehicleLicencePlateNo" placeholder="Enter Capacity">
                            <span class="required"></span>
                        </div>
                    </div>
                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <p>Vehicle Registration State</p>
                        <select class="select2 update-class vehicleValid" data-placeholder="Select Registration State" asp-for="Transport.VehicleRegistrationState">
                            <option value="" selected disabled></option>
                            <option value="AL">AL-Alabama</option>
                            <option value="AK">AK-Alaska</option>
                            <option value="AZ">AZ-Arizona</option>
                            <option value="AR">AR-Arkansas</option>
                            <option value="CA">CA-California</option>
                            <option value="CO">CO-Colorado</option>
                            <option value="CT">CT-Connecticut</option>
                            <option value="DE">DE-Delaware</option>
                            <option value="DC">DC-District Of Columbia</option>
                            <option value="FL">FL-Florida</option>
                            <option value="GA">GA-Georgia</option>
                            <option value="HI">HI-Hawaii</option>
                            <option value="ID">ID-Idaho</option>
                            <option value="IL">IL-Illinois</option>
                            <option value="IN">IN-Indiana</option>
                            <option value="IA">IA-Iowa</option>
                            <option value="KS">KS-Kansas</option>
                            <option value="KY">KY-Kentucky</option>
                            <option value="LA">LA-Louisiana</option>
                            <option value="ME">ME-Maine</option>
                            <option value="MD">MD-Maryland</option>
                            <option value="MA">MA-Massachusetts</option>
                            <option value="MI">MI-Michigan</option>
                            <option value="MN">MN-Minnesota</option>
                            <option value="MS">MS-Mississippi</option>
                            <option value="MO">MO-Missouri</option>
                            <option value="MT">MT-Montana</option>
                            <option value="NE">NE-Nebraska</option>
                            <option value="NV">NV-Nevada</option>
                            <option value="NH">NH-New Hampshire</option>
                            <option value="NJ">NJ-New Jersey</option>
                            <option value="NM">NM-New Mexico</option>
                            <option value="NY">NY-New York</option>
                            <option value="NC">NC-North Carolina</option>
                            <option value="ND">ND-North Dakota</option>
                            <option value="OH">OH-Ohio</option>
                            <option value="OK">OK-Oklahoma</option>
                            <option value="OR">OR-Oregon</option>
                            <option value="PA">PA-Pennsylvania</option>
                            <option value="RI">RI-Rhode Island</option>
                            <option value="SC">SC-South Carolina</option>
                            <option value="SD">SD-South Dakota</option>
                            <option value="TN">TN-Tennessee</option>
                            <option value="TX">TX-Texas</option>
                            <option value="UT">UT-Utah</option>
                            <option value="VT">VT-Vermont</option>
                            <option value="VA">VA-Virginia</option>
                            <option value="WA">WA-Washington</option>
                            <option value="WV">WV-West Virginia</option>
                            <option value="WI">WI-Wisconsin</option>
                            <option value="WY">WY-Wyoming</option>
                        </select>
                        <span class="required"></span>
                    </div>
                </div>
                <div class="row">
                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <div class="input-field">
                            <p>
                                Vehicle VIN No
                            </p>
                            <input type="text" class="text-input update-class vehicleValid" asp-for="Transport.VehicleVINNo" placeholder="Enter Capacity">
                            <span class="required"></span>
                        </div>
                    </div>

                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                        <div class="input-field">
                            <p>
                                Vehicle Color
                            </p>
                            <input type="text" class="patientColorInput patientInfoTxtField update-class" asp-for="Transport.VehicleColor" id="showPalette">

                        </div>
                    </div>
                </div>
                <div class="row">
                    @*<div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <div class="input-field">
                            <p>
                                License Issue Date
                            </p>
                            <input type="text" asp-for="Transport.LicenseIssueDate" class="text-input datepicker update-class" placeholder="Enter Issue Date">
                        </div>
                    </div>*@

                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">

                        <div class="input-field">
                            <p>
                                License Registration Date
                            </p>
                            <input type="text" asp-for="Transport.LicenseExpireDate" class="text-input datepicker update-class" placeholder="Enter Registration Date">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <!----<input type="file" class="form-control rentfield dropify" id="input-file-now-custom-2" data-height="100" asp-for="Provider.File">-->
                    <div class=" col-sm-6 col-md-6 col-xl-6 col-12 ">
                        <div class="input-field">
                            <p>
                                Vehicle Attachments
                            </p>
                            @if (Model.Transport.vehicleAttchments.Count > 0)
                            {
                                <input type="file" multiple data-default-file="@Model.Transport.vehicleAttchments[0]" id="imgInp" class="form-control update-class fileUpload dropify" data-height="100">
                            }
                            else
                            {
                                <input type="file" asp-for="Transport.Attachments" multiple id="imgInp" class="form-control update-class fileUpload dropify" data-height="100">

                            }
                           

                        </div>
                        <div id='preview'>
                            @if (Model.Transport.vehicleAttchments.Count > 0)
                            {@foreach (var item in Model.Transport.vehicleAttchments)
                                {
                                    <p>@item.Url<span class="remove-file right text-danger">x</span></p>
                                }
                        }

                        </div>
                        @*<div id="imagesDiv" class="gallery"></div>*@

                        @*<button id="getImagessrc">click</button>*@
                    </div>
                    <div class="col-sm-6 col-md-6 col-xl-6 col-12">
                        <p>Update Vehicle Image</p>
                        <div class="center">

                            <div class="docs-preview clearfix">
                                <div class="img-preview preview-lg">
                                    <div id="result-wrapper2"  onclick="ShowModal('modal2')">
                                        @if (Action == "Update")
                                        {
                                            @if (transportImage == null)
                                            {
                                                <a class="remove-image2 removebtn-show2" href="javascript:void(0)" style="display: inline;display:none;">&#215;</a>
                                                <div class="middle">
                                                    <div class="text">
                                                        @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal2"><i class="mdi mdi-camera"></i></a>*@
                                                        <p>Upload</p>
                                                    </div>
                                                </div>

                                                <img src="~/app-assets/images/user/male-user.png" class="empty_img2" id="result2" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">

                                            }
                                            else if (transportImage == "")
                                            {
                                                <a class="remove-image2 removebtn-show2" href="javascript:void(0)" style="display: inline;display:none;">&#215;</a>
                                                <div class="middle">
                                                    <div class="text">
                                                        @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal2"><i class="mdi mdi-camera"></i></a>*@
                                                        <p>Upload</p>
                                                    </div>
                                                </div>

                                                <img src="~/app-assets/images/user/male-user.png" class="empty_img2" id="result2" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">

                                            }
                                            else
                                            {
                                                <a class="remove-image2" href="javascript:void(0)" style="display: inline;">&#215;</a>
                                                <div class="middle">
                                                    <div class="text">
                                                        @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal2"><i class="mdi mdi-camera"></i></a>*@

                                                        <p>Upload</p>
                                                    </div>
                                                </div>
                                                @*<img src="~/app-assets/images/user/male-user.png" class="empty_img" id="result" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5;display:none">*@
                                                <img src="/images/@transportImage" id="result2" class="list_image2" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">
                                            }
                                        }
                                        else
                                        {
                                            <a class="remove-image2 removebtn-show2" href="javascript:void(0)" style="display: inline;display:none;">&#215;</a>
                                            <div class="middle">
                                                <div class="text">
                                                    @*<a class=" modal-trigger" href="javascript:void(0);" data-toggle="modal" data-target="#modal2"><i class="mdi mdi-camera"></i></a>*@
                                                    <p>Upload</p>
                                                </div>
                                            </div>
                                        }


                                        <img src="~/app-assets/images/user/male-user.png" class="empty_img2" id="result2" style=" width: 250px; height: 250px; border-radius:50%;border:2px solid #f5f5f5">
                                    </div>
                                </div>
                            </div>
                            <div id="modal2" class="modal imageModel bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <div class="row">
                                                <div id="main-cropper2"></div>
                                                <div class="panel panel-default" id="captureImageFromCam2" style="display: none;">
                                                    <div class="panel-heading">Camera</div>
                                                    <div class="panel-body">
                                                        <div id="my_camera2"></div>
                                                        <!-- A button for taking snaps -->

                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-sm-12 center">
                                                    <a class="btn add-btn button imageSection" onclick="OpenImageSection2();" data-toggle="tooltip" data-placement="top" title="" data-original-title="Capture From Camera">
                                                        <i class="mdi mdi-camera"></i>
                                                    </a>
                                                    <a class="btn btn-info add-btn" id="take_snapbtn2" onClick="take_snapshot2()"> Take Snapshot</a>

                                                    <a class="btn add-btn button actionUpload2" data-toggle="tooltip" data-placement="top" title="" data-original-title="Upload Image">
                                                        <i class="mdi mdi-cloud-upload"></i>
                                                        <input type="file" class="custom-file-input" id="upload2">
                                                    </a>
                                                    <a id="rotateLeft2" class="btn add-btn" data-deg="-90"><i class="mdi mdi-rotate-left"></i></a>
                                                    <a id="rotateRight2" class="btn add-btn" data-deg="90"><i class="mdi mdi-rotate-right"></i></a>
                                                    <a class="btn modal-close add-btn disabled" id="showResult2">Save</a>
                                                    @*<a class="btn add-btn" disabled id="RemoveResult2">Remove</a>*@
                                                    <a class="btn modal-close add-btn" data-dismiss="modal">Cancel</a>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row mt-2 mb-2">
                <div class="col s12">
                    <div class="center">
                        <button type="submit" id="submitBtn" class="waves-effect waves-light btn add-btn update-class">Save</button>
                        @if (Action == "Update")
                        {

                            <a href="javascript:void(0);" onclick="enablefields()" class="waves-effect waves-light Recreate btn">Edit</a>
                        }

                        <a href="/Transport/TransportAndDriver" class="waves-effect waves-light Recreate btn">Cancel</a>
                    </div>
                </div>
            </div>
        </form>

    </div>
</div>
<div class="right-sidebar slide-out-right">
    <div class="slimscrollright">

        <div class="row">
            <div class="col"> <span><i class="ti-close left right-side-close right-side-toggle color_Close"></i></span> </div>
        </div>

        <div class="r-panel-body">
            <div class="row">
                <form asp-controller="Transport" asp-action="AddVehicleType" method="post" data-ajax="true" data-ajax-success="onTypeCreate(data)" class="col s12">
                    <div class="col-12">
                        <h6>Add New Type <span class="required">*</span></h6>
                        <input class="text-input employementTitleval SignIdType" asp-for="VehicleType.VehicleType1" type="text" placeholder="Enter Language Title " />
                        <span class="required"></span>
                        <button type="submit" class="modal-action btn add-btn right">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="right-sidebar slide-out-right2">
    <div class="slimscrollright">

        <div class="row">
            <div class="col"> <span><i class="ti-close left right-side-close right-side-toggle color_Close"></i></span> </div>
        </div>

        <div class="r-panel-body">
            <div class="row">
                <form asp-controller="Transport" asp-action="AddVehicleMake" method="post" data-ajax="true" data-ajax-success="onMakeCreate(data)" class="col s12">
                    <div class="col-12">
                        <h6>Add New Make <span class="required">*</span></h6>
                        <input asp-for="VehicleMake.VehicleMake1" class="text-input employementTitleval SignIdType" type="text" placeholder="Enter Language Title " />
                        <span class="required"></span>
                        <button type="submit" class="modal-action btn add-btn right">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="right-sidebar slide-out-right3">
    <div class="slimscrollright">

        <div class="row">
            <div class="col"> <span><i class="ti-close left right-side-close right-side-toggle color_Close"></i></span> </div>
        </div>

        <div class="r-panel-body">
            <div class="row">
                <form asp-controller="Transport" asp-action="AddVehicleModel" method="post" data-ajax="true" data-ajax-success="onModelCreate(data)" class="col s12">
                    <div class="col-12">
                        <h6>Add New Model <span class="required">*</span></h6>
                        <input asp-for="VehicleModel.VehicleModel1" class="text-input employementTitleval SignIdType" type="text" placeholder="Enter Language Title " />
                        <span class="required"></span>
                        <button type="submit" class="modal-action btn add-btn right">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>