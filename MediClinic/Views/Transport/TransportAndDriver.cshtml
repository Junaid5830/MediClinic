@model MediClinic.Models.TransportViewModel
@using MediClinic.Services.Interfaces.SessionManager;
@inject ISessionManager _sessionManager;

@{
    ViewData["Title"] = "TransportAndDriver";
    Layout = "~/Views/Shared/_LayoutElite.cshtml";
    var LoginId = ViewContext.RouteData.Values["id"];
}

@section styles{
    <link href="~/Elite/css/pages/tab-page.css" rel="stylesheet">
    <link href="~/Elite/css/pages/google-vector-map.css" rel="stylesheet" />
    @*<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">*@
    <style>
        .quickRegistration{
            margin-top:13%;
        }
        #myTransport .dot {
            height: 15px !important;
            width: 25px !important;
            border-radius: unset !important;
        }

        .list-img img {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background-color: #f5f5f5;
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .12);
        }

        .tabs {
            height: auto !important;
        }


        .customtab li a.nav-link {
            font-size: 16px;
            margin-right: 4px !important;
        }

            .customtab li a.nav-link.active, .customtab li a.nav-link:hover {
                color: #fff !important;
                background-color: #547cea !important;
            }

            .customtab li a.nav-link.active {
                border-bottom: 2px solid black !important;
            }

        .nav-tabs .nav-link {
            border-top-left-radius: 0px !important;
            border-top-right-radius: 0px !important;
        }

        .toggle-off:hover {
            color: Gray !important;
        }

        .toggle-handle {
            background-color: #e6e6e6 !important;
            border-color: #ccc !important;
        }

        .pac-container {
            z-index: 99999999 !important;
        }
    </style>
}
@section scripts{

    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/Elite/_node_modules/inputmask/dist/min/jquery.inputmask.bundle.min.js"></script>
    @*<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyDBlodDGZJdKI6epWtg8hZtKv-NQXv7aRc&sensor=false&libraries=places"></script>*@
    @*<script async defer src="https://maps.google.com/maps/api/js?key=AIzaSyDBlodDGZJdKI6epWtg8hZtKv-NQXv7aRc&libraries=places&callback=initAutocomplete"></script>*@
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBlodDGZJdKI6epWtg8hZtKv-NQXv7aRc&libraries=places&callback=initAutocomplete"></script>

    <!-- Chart JS -->
    <script>
        //function init() {
        //    var input = document.getElementById('address');
        //    debugger;
        //    var autocomplete = new google.maps.places.Autocomplete(input);
        //    console.log(autocomplete);
        //}
        function initAutocomplete(e) {
            debugger;
            new google.maps.places.Autocomplete(
                (document.getElementById('address')),
                { types: ['geocode'] }
            );
        }
    </script>
    <script>
        $('.select2').select2();
        $(function () {
            var transport = $('#myTransport').DataTable({
                "lengthMenu": false,
                "lengthChange": false,
                "scrollX": false,
                "searching": true,
                "responsive": true,
                "info": false,
                'order': [], 'columnDefs': [{ "targets": [0], "orderable": false }],

            });
            var driver = $('#myDriver').DataTable({
                "lengthMenu": false,
                "lengthChange": false,
                "scrollX": false,
                "searching": true,
                "responsive": true,
                "info": false,
                'order': [], 'columnDefs': [{ "targets": [0], "orderable": false }],

            });

            $('[data-search-driver]').on('keyup', function () {
                driver.search(this.value).draw();
            });
            $('[data-search]').on('keyup', function () {
                transport.search(this.value).draw();
            });

        });
        function DeleteAmbulance(Id, event) {
            debugger;
            event.closest('tr').remove();

            $.get("/Transport/AmbulanceDelete", { Id: Id }).done(function (data) {
                debugger;



            });
            $(".checkmark").show().fadeOut(6000);

        }
        function ChangeDriverStatus(DriverId, status,event) {
            debugger;
            let tr = event.closest('tr');
            
           
            
           
            event.closest('tr').remove();
            $.get("/Transport/ChangeDriverStatus", { Id: DriverId, status: status }).done(function (data) {
                $("#tab2").html("");
                $("#tab2").html(data);
            });
             //if ($("tr.card_" + DriverId).hasClass("bg-danger"))
             //   {
             //        $("tr.card_"+DriverId).removeClass("bg-danger");
             //   }
             //   else {
             //        $("tr.card_"+DriverId).addClass("bg-danger");
             //   }
            //if (status) {
               
            //    $("#myDriver").find('tbody').append(tr);
            //}
            //else {
                
            //    $("#inactiveDriver").find('tbody').append(tr);
            //}
            $(".checkmark").show().fadeOut(6000);
        }

        $('.select2').select2();
        $(function () {
            $('#onWayGrid').DataTable({
                "lengthMenu": false,
                "lengthChange": false,
                "scrollX": false,
                "searching": false,
                "responsive": true,
                "info": false,
                ///  'order': [], 'columnDefs': [{ "targets": [0, 14], "orderable": false }],

            });
            $('#availableGrid').DataTable({
                "lengthMenu": false,
                "lengthChange": false,
                "scrollX": false,
                "searching": false,
                "responsive": true,
                "info": false,
                // 'order': [], 'columnDefs': [{ "targets": [0, 14], "orderable": false }],

            });
            $('#Jobtable').DataTable({
                "lengthMenu": false,
                "lengthChange": false,
                "scrollX": false,
                "searching": false,
                "responsive": true,
                "info": false,
                // 'order': [], 'columnDefs': [{ "targets": [0, 14], "orderable": false }],

            });

        });
        function AssignRoute(DriverId, Event) {
            debugger
            $(".text-input").val('');
            $("#DriverId").val('').trigger('change');
            if (DriverId == null) {
                $("#DriverField").show();
            }
            else {
                $("#DriverField").hide();
                $("#DriverId").val(DriverId);
            }
            //$(".model-DisableField").attr("disabled", true);

            $("#DriverFieldStatus").hide();
            $("#Save_btn").attr('disabled', true);
            $("#ambulanceModal").modal('show');
        }

        var lat = '';
        var long = '';
        var Dlat = '';
        var Dlong = '';
        $(document).ready(function () {
          
            $.support.cors = true;
            $.ajaxSetup({ cache: false });
            $('#PickAddress').blur(function () {
                debugger;
                $zval = $('#PickAddress').val();

                getCityStatePick($zval);

            });
            function getCityStatePick($zip) {
                debugger;
                $.getJSON('https://maps.googleapis.com/maps/api/geocode/json?address=' + $zip + '&key=AIzaSyDBlodDGZJdKI6epWtg8hZtKv-NQXv7aRc', function (response) {
                    debugger;
                    if (response.status == "ZERO_RESULTS") {
                        $("#err_infozip").html("Enter Valid & Only US zip code").show().fadeOut(2200);
                    }
                    else {
                        var address_components = response.results[0].geometry;
                        $.each(address_components, function (index, component) {
                            debugger;

                            if (index == 'location') {
                                lat = component.lat;
                                long = component.lng;

                            }


                        });

                        $("#latitude").val(lat);
                        $("#longitude").val(long);

                        //$('#modal1').modal('open');
                    }
                    //find the city and state


                    //pre-fill the city and state
                    LatAndLonValue(lat, long)
                });
            }
            $('#ambulanceModal').on('change', '#PatientProfileId', function () {
                debugger;
                var Id = $("#PatientProfileId").select2('val');//Appointment Type Value
                $.post("/Transport/PatientDetails", { PatientId: Id }).done(function (data) {
                    debugger;
                    $("#patientPhoneNo").val(data.mobilePhone);
                    $("#patientName").val(data.fullName);


                    var Address = data.addressLine1 + data.addressLine2 + data.addressLine3;
                    $("#PickAddress").val(Address);
                    getCityStatePick(Address);
                });
            })



        });
        function LatAndLonValue(latitude, longitude) {
            debugger;
            if (latitude != '' && longitude != '') {
                //$("#Save_btn").attr('disabled', false);
            }
        }

        $(document).ready(function () {
            $("#quickPhoneNumber").inputmask('1 (999) 999-9999');
            $.support.cors = true;
            $.ajaxSetup({ cache: false });
            $('#DestinationAddress').blur(function () {
                debugger;
                $zval = $('#DestinationAddress').val();

                getCityState($zval);

            });
            function getCityState($zip) {
                debugger;
                $.getJSON('https://maps.googleapis.com/maps/api/geocode/json?address=' + $zip + '&key=AIzaSyDBlodDGZJdKI6epWtg8hZtKv-NQXv7aRc', function (response) {
                    debugger;
                    if (response.status == "ZERO_RESULTS") {
                        $("#err_infozip").html("Enter Valid & Only US zip code").show().fadeOut(2200);
                    }
                    else {
                        var address_components = response.results[0].geometry;
                        $.each(address_components, function (index, component) {
                            debugger;

                            if (index == 'location') {
                                Dlat = component.lat;
                                Dlong = component.lng;

                            }


                        });

                        $("#Dlatitude").val(Dlat);
                        $("#Dlongitude").val(Dlong);

                        //$('#modal1').modal('open');
                    }
                    //find the city and state


                    //pre-fill the city and state
                    DLatAndLonValue(Dlat, Dlong)
                });
            }



        });

        function DLatAndLonValue(Dlatitude, Dlongitude) {
            debugger;
            if (Dlatitude != '' && Dlongitude != '') {
                $("#Save_btn").attr('disabled', false);
            }
        }
        function onSuccessAssign(data) {
            debugger;
            $("#DriverAvailable").empty();
            $("#DriverAvailable").html(data);
            $('#availableGrid').DataTable({
                "lengthMenu": false,
                "lengthChange": false,
                "scrollX": false,
                "searching": false,
                "responsive": true,
                "info": false,
                // 'order': [], 'columnDefs': [{ "targets": [0, 14], "orderable": false }],

            });
            $(".checkmark").show().fadeOut(6000);

            $("#ambulanceModal").modal("hide");
        }
        $("#DriverId").on('change', function () {
            debugger;
            var DriverValue = $(this).val();
            $.post("/Transport/DriverJobCurrentStatus", { Id: DriverValue }).done(function (data) {
                debugger;
                if (data == "Error") {
                    $("#DriverFieldStatus").hide();

                }
                else if (data == null) {
                    $("#DriverStatus").text('Available');
                    $("#DriverFieldStatus").show();
                    $(".model-DisableField").attr("disabled", false);
                }
                else if (data == "Finished") {
                    $("#DriverStatus").text(data);
                    $("#DriverFieldStatus").show();
                    $(".model-DisableField").attr("disabled", false);

                }
                else {
                    $("#DriverStatus").text(data);
                    $("#DriverFieldStatus").show();
                    $(".model-DisableField").attr("disabled", true);

                }


            });
        })


        function OpenQuickRegistration() {
            debugger
            $("#ambulanceModal").modal("hide");
            $("#quickRegister").modal("show");

        }

        function onQuickRegister(data) {
            debugger
            if (data.error) {

            }
            else {
                let fullName = data.data.firstName + '' + data.data.lastName;
                let option = $('<option value="' + data.data.id + '">' + fullName + '</option>');

                $("#quickRegister").modal("hide");
                $(".checkmark").show().fadeOut(6000);
                $("#PatientProfileId").append(option)
            }

        }



    </script>
<script>
    
    function stopRowEvent(event) {
        event.stopPropagation();
    }
    $("#QuickRegistrationForm").on('submit', function (e) {

        debugger;
        if ($(this).valid()) {
            $(this).ajaxSubmit({

                success: function (response) {
                    //$('#btnPatientSecondary').attr('disabled', false);
                    //$('#btnPatientSecondary .waves-ripple').remove(); 
                },
                error: function (response) {
                    //$$('#btnPatientSecondary').attr('disabled', false);
                },
                complete: function (xhr) {
                    disablePatientsecondaryFields();

                    //$('#btnPatientSecondary').attr('disabled', false);
                    //$('#btnPatientSecondary .waves-ripple').remove(); 
                    onCreateToDoSecondary(xhr.responseJSON);

                }
            });
        }
    });
</script>
}
<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" /><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" /></svg>

<div class="page-wrapper">
    <div class="container">
        <div id="breadcrumbs-wrapper">
            <!-- Search for small screen-->
            <div class="row">
                <div class=" col" margin-top-8">
                    <h5 class="breadcrumbs-title color-blue">TRANSPORTATION/DRIVERS</h5>
                </div>
            </div>

        </div>

        <div class="row">
            <div class="col-12">

                <ul class="nav nav-tabs customtab" role="tablist">
                    <li class="nav-item"> <a class="nav-link active" data-toggle="tab" href="#tab1" role="tab"> <span class="hidden-xs-down">Vehicles</span></a> </li>
                    <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#tab2" role="tab"><span class="hidden-xs-down"></span>Driver</a> </li>
                    @*<li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#tab3" role="tab"><span class="hidden-xs-down"></span>Inactive Driver</a> </li>*@
                    <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#AssignPatient" role="tab"><span class="hidden-xs-down"></span>Assign Patient</a> </li>

                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <div class="tab-pane p-10 active" id="tab1" role="tabpanel">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-2" margin-top-8">
                                <h5 class="breadcrumbs-title color-blue">Vehicle List</h5>
                            </div>
                            <div class="col-sm-9 col-md-5 col-lg-6" display-block">
                                <div class="header-search-wrapper  display-flex position-relative">
                                    <i class="ti-search position-absolute  search-icons"></i>
                                    <input type="text" class="form-control set_Place search-box z-depth-2" placeholder="Search" aria-label="Username" data-search aria-describedby="basic-addon11">
                                    <a class="btn ml-2 search-btn">
                                        Search
                                    </a>
                                </div>
                            </div>

                            <div class="col-sm-12 col-md-4 col-lg-4">

                                <a href="@Url.Action("TransportAdd","Transport")" class="btn  float-right add-btn set_smallscreen">
                                    Add New Vehicle
                                </a>
                            </div>

                        </div>

                        <div class="row tablee mb-2">
                            <div class="col-md-12">
                                <div class="table-responsive">
                                    <table id="myTransport" class="table dataTables_wrapper ">
                                        <thead>
                                            <tr class="uppercase">
                                                <th>
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input select-all" data-val="all" id="selectAll">
                                                        <label class="custom-control-label" for="selectAll" style="--bubble-color:#5a5a5a"></label>
                                                    </div>
                                                </th>
                                                <th>Vehicle Type</th>
                                                <th>Vehicle Make</th>
                                                <th>Vehicle Model</th>
                                                <th>Vehicle Capacity </th>
                                                <th>Vehicle Licence Plate No</th>
                                                <th>Vehicle Registration State</th>
                                                <th>Vehicle VIN NO</th>
                                                <th>Vehicle Color</th>
                                                <th>Vehicle ID No</th>
                                                <th class="all">Action  </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (!(Model is null))
                                            {
                                                @if (!(Model.TransportList is null))
                                                {
                                                    @foreach (var item in Model.TransportList)
                                                    {
                                                        <tr class="card" style="cursor: pointer">
                                                            <th>
                                                                <div class="custom-control custom-checkbox">
                                                                    <input type="checkbox" class="custom-control-input" id="@item.TransportId">
                                                                    <label class="custom-control-label" for="@item.TransportId"></label>
                                                                </div>
                                                            </th>
                                                            @if (!(item.VehicleType is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">@item.VehicleType.VehicleType1</td>

                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            @if (!(item.VehicleMake is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">@item.VehicleMake.VehicleMake1</td>

                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            @if (!(item.VehicleModel is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">@item.VehicleModel.VehicleModel1</td>

                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            @if (!(item.VehicleCapacity is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">@item.VehicleCapacity</td>
                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            @if (!(item.VehicleLicencePlateNo is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">@item.VehicleLicencePlateNo</td>

                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            @if (!(item.VehicleRegistrationState is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">@item.VehicleRegistrationState</td>

                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            @if (!(item.VehicleVINNo is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">@item.VehicleVINNo</td>

                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            @if (!(item.VehicleColor is null))
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">
                                                                    <span class="dot" style="background-color:@item.VehicleColor"></span>
                                                                </td>
                                                            }
                                                            else
                                                            {
                                                                <td onclick="openUpModalVehicle('@item.TransportId')">N/A</td>
                                                            }
                                                            <td onclick="openUpModalVehicle('@item.TransportId')">@item.TransportId</td>
                                                            <td class="action">
                                                                <button class="btn btn-primary dropdown-toggle table_btn" type="button" data-toggle="dropdown">
                                                                    Options
                                                                    <span class="caret"></span>
                                                                </button>
                                                                <ul class="dropdown-menu Table_Drop ul_Caim">
                                                                    <li onclick="DeleteAmbulance(@item.TransportId,this)"><a href="javascript:void(0)">Delete</a></li>
                                                                    <li><a href="/Transport/TransportAdd/@item.TransportId">Edit</a></li>
                                                                    <li><a href="javascript:void(0)" onclick="openUpModalVehicle('@item.TransportId')">View</a></li>
                                                                </ul>
                                                            </td>
                                                        </tr>
                                                    }
                                                }
                                            }

                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane  p-10" id="tab2" role="tabpanel">
                        <partial name="~/Views/Transport/PartialViews/_DriverActiveInActive.cshtml" />
                    </div>
                 
                    <div class="tab-pane  p-10" id="AssignPatient" role="tabpanel">
                        <div class="row">
                            <div class="col">
                                <h5 class="breadcrumbs-title color-blue">Available Driver list</h5>
                            </div>
                            <div class="col">
                                <a onclick="AssignRoute(null, this);" class="mt-2 btn add-btn set_smallscreen waves-effect waves-light float-right" style="margin-top: -11px">
                                    Assign New Request

                                </a>
                            </div>


                        </div>
                        <div class="row">
                            <div class="col-12">

                                <ul class="nav nav-tabs customtab" role="tablist">
                                    <li class="nav-item"> <a class="nav-link active" data-toggle="tab" href="#AvaialbeDriver" role="tab"> <span class="hidden-xs-down">Available Drivers</span></a> </li>
                                    <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#JobStatus" role="tab"><span class="hidden-xs-down"></span>Driver Job  Status</a> </li>
                                    <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#JobRequestStatus" role="tab"><span class="hidden-xs-down"></span>Job Request  Status</a> </li>

                                </ul>
                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div class="tab-pane active" id="AvaialbeDriver" role="tabpanel">
                                        <div id="breadcrumbs-wrapper mb-0">

                                        </div>
                                        <div class="row tablee mb-2">
                                            <div class="col-md-12">
                                                <div class="table-responsive" id="DriverAvailable">

                                                    <partial name="~/Views/Transport/PartialViews/_DriverAvailability.cshtml" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="JobStatus" role="tabpanel">

                                        <div class="row tablee mb-2">
                                            <div class="col-md-12">
                                                <div class="table-responsive">
                                                    <partial name="~/Views/Transport/PartialViews/_DriverJobCurrentStatus.cshtml" />

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="JobRequestStatus" role="tabpanel">

                                        <div class="row tablee mb-2">
                                            <div class="col-md-12">
                                                <div class="table-responsive">
                                                    <partial name="~/Views/Transport/PartialViews/_JobRequestStatus.cshtml" />

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<div id="ambulanceModal" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Assign Pick Up Point</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <form asp-action="AssignDriverToLocation" asp-controller="Transport" method="post" data-ajax="true" data-ajax-success="onSuccessAssign(data)">
                <div class="modal-body">
                    @*<div class="row">
                        <div class="col">
                           
                            <a onclick="OpenQuickRegistration()" class="mt-2 btn add-btn set_smallscreen waves-effect waves-light float-right" style="margin-top: -11px">
                                Quick Registration

                            </a>
                        </div>
                    </div>*@
                    <div class="row">
                        <div class="col-12 col-md-6" >
                            <div id="DriverField">
                                <p>Select Driver</p>

                                <div class="input-field">
                                    <select id="DriverId" data-placeholder="Select Driver Name" asp-for="driverJobRequestDto.DriverId" type="text" class="select2 text-input" asp-items="@(new SelectList(Model.DriversDropDownList,"DriverId","FullName"))">
                                        <option selected disabled value=""></option>

                                    </select>
                                </div>
                            </div>
                           
                        </div>

                        <div class="col-6 col-md-3" >
                            <div id="DriverFieldStatus">
                                <p>Driver Status</p>

                                <div class="input-field">
                                    <p class="color-blue" id="DriverStatus"></p>
                                </div>
                            </div>
                           
                        </div>
                        <div class="col-6 col-md-3">

                            <a onclick="OpenQuickRegistration()" class="btn add-btn quickRegistration waves-effect waves-light float-right">
                                Quick Registration

                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-6">
                            <p>Select Patient <span class="required"> * </span></p>
                            <select id="PatientProfileId" class="select2 model-DisableField" data-placeholder="Select Patient Name" asp-for="driverJobRequestDto.PatientId"
                                    asp-items="@(new SelectList(Model.patientListWithUsers,"PatientInfoId","FullName"))">
                                <option selected disabled value=""></option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <p>
                                Patient Phone No
                            </p>
                            <div class="input-field">
                                <input readonly="readonly" class="text-input model-DisableField" id="patientPhoneNo" type="text" asp-for="driverJobRequestDto.CallerPhoneNo" placeholder="Enter Address">
                            </div>
                        </div>
                        <div class="col">
                            <p>
                                Patient Full Name
                            </p>
                            <div class="input-field">
                                <input readonly="readonly" class="text-input model-DisableField" id="patientName" type="text" asp-for="driverJobRequestDto.CallerName" placeholder="Enter Address">
                            </div>
                        </div>


                    </div>
                    <div class="row">
                        <div class="col">
                            <p>
                                Pick Up Address:
                            </p>
                            <div class="input-field">

                                <input class="text-input model-DisableField" onkeyup="initAutocomplete(event)" type="text" id="PickAddress" asp-for="driverJobRequestDto.Address" placeholder="Enter Address">
                            </div>
                        </div>


                        <input type="text" hidden="hidden" class="text-input" id="latitude" asp-for="driverJobRequestDto.Latitude" />
                        <input type="text" hidden="hidden" class="text-input" id="longitude" asp-for="driverJobRequestDto.Longitude" />


                    </div>
                    <div class="row">
                        <div class="col-12">
                            <p>
                                Destination Address:
                            </p>
                            <div class="input-field">

                                <input class="text-input model-DisableField address" onkeyup="initAutocomplete(event)" type="text" id="DestinationAddress" asp-for="driverJobRequestDto.DAddress" placeholder="Enter Address">
                            </div>
                        </div>
                        <input type="text" hidden="hidden" class="text-input" id="Dlatitude" asp-for="driverJobRequestDto.DLatitude" readonly />
                        <input type="text" hidden="hidden" class="text-input" id="Dlongitude" asp-for="driverJobRequestDto.DLongitude" readonly />


                    </div>

                </div>
                <div class="modal-footer">
                    <button type="submit" id="Save_btn" class="btn add-btn ">Save</button>

                    <button type="button" class="btn Recreate " data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>






<div id="driverDetailModal" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body" id="partialPageData">

            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<div id="quickRegister" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Quick Register</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
                <form asp-controller="QuickPatientRegister" asp-action="QuickRegister" method="post" data-ajax="true" data-ajax-success="onQuickRegister(data)">
                    <div class="modal-body">

                        <div class="row">
                            <div class="col">
                                <p>
                                    Patient First Name <span class="required">*</span>
                                </p>
                                <div class="input-field">
                                    <input class="text-input" type="text" asp-for="QuickRegister.FirstName" placeholder="Enter FirstName Name">
                                    <span class="required" asp-validation-for="QuickRegister.FirstName"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <p>
                                    Patient Last Name <span class="required">*</span>
                                </p>
                                <div class="input-field">
                                    <input class="text-input" type="text" asp-for="QuickRegister.LastName" placeholder="Enter LastName Name">
                                    <span class="required" asp-validation-for="QuickRegister.LastName"></span>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <p>
                                    Phone No <span class="required">*</span>
                                </p>
                                <div class="input-field">
                                    <input class="text-input" id="quickPhoneNumber" type="text" asp-for="QuickRegister.PhoneNumber" placeholder="Enter Phone Number">
                                    <span class="required" asp-validation-for="QuickRegister.PhoneNumber"></span>
                                </div>
                            </div>



                        </div>

                        <div class="row">
                            <div class="col">
                                <p>
                                    Enter Address <span class="required">*</span>
                                </p>
                                <div class="input-field">
                                    <input class="text-input address" asp-for="QuickRegister.Address" type="text" placeholder="Enter Address">
                                    <span class="required" asp-validation-for="QuickRegister.Address"></span>

                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" id="quickRegisterBtn" class="btn add-btn ">Save</button>

                        <button type="button" class="btn Recreate " data-dismiss="modal">Close</button>
                    </div>
                </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<script type="text/javascript">
    function openUpModal(id) {
        $.get("/Transport/GetProfileById", { driverId: id }).done(function (data) {
            $('.modal-title').text("Driver Details");
            $("#driverDetailModal").modal('show');
            $("#partialPageData").html(data);
        })
    }
    function openUpModalVehicle(id) {
        $.get("/Transport/GetTransportById", { transportId: id }).done(function (data) {
            $('.modal-title').text("Vehicle Details");
            $("#driverDetailModal").modal('show');
            $("#partialPageData").html(data);
        })
    }
</script>